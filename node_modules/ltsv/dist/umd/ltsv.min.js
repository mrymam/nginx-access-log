/*!
 * @license ltsv.js Copyright(c) 2013 sasa+1
 * https://github.com/sasaplus1/ltsv.js
 * Released under the MIT license.
 */
!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((r=r||self).ltsv={})}(this,(function(r){"use strict";function e(r){return/^[0-9A-Za-z_.-]+$/.test(r)}function t(r){return/^[\x01-\x08\x0B\x0C\x0E-\xFF]*$/.test(r)}function n(r,n){if(null===r||"object"!=typeof r)throw new TypeError("record must be an Object");for(var i=Object.keys(r),o=[],a=0,f=i.length;a<f;++a){var u=i[a],c=r[i[a]];if(n&&!e(u))throw new SyntaxError('unexpected character in label: "'+u+'"');if(n&&!t(c))throw new SyntaxError('unexpected character in value: "'+c+'"');o[a]=u+":"+c}return o.join("\t")}function i(r,e){var t=Array.isArray(r);if(!t&&(null===r||"object"!=typeof r))throw new TypeError("data must be an Object or Array");var i=[];if(t)for(var o=0,a=r.length;o<a;++o)i[o]=n(r[o],e);else i.push(n(r,e));return i.join("\n")}function o(r,n){var i=String(r),o=i.indexOf(":");if(-1===o)throw new SyntaxError('field separator is not found: "'+i+'"');var a=i.slice(0,o),f=i.slice(o+1);if(n&&!e(a))throw new SyntaxError('unexpected character in label: "'+a+'"');if(n&&!t(f))throw new SyntaxError('unexpected character in value: "'+f+'"');return{label:a,value:f}}function a(r,e){for(var t=String(r).replace(/(?:\r?\n)+$/,"").split("\t"),n={},i=0,a=t.length;i<a;++i){var f=o(t[i],e),u=f.label,c=f.value;n[u]=c}return n}function f(r,e){for(var t=String(r).replace(/(?:\r?\n)+$/,"").split(/\r?\n/),n=[],i=0,o=t.length;i<o;++i)n[i]=a(t[i],e);return n}function u(r){return a(r,!1)}function c(r){return a(r,!0)}function s(r,e,t){for(var n=0,i=0,o=null;;){var a=r.indexOf("\n",n);if(-1===a){if(!(e&&n<r.length))break;a=r.length-1}var f=r.slice(n,a+1),u={};try{u=this.parse(f)}catch(r){o=r}if(o)break;t.enqueue(this.objectMode?u:JSON.stringify(u)),i=n=a+1}this.buffer=r.slice(i),o&&t.error(o)}function l(r){void 0===r&&(r={objectMode:!1,strict:!1});var e=r.objectMode,t=void 0!==e&&e,n=r.strict,i={buffer:"",objectMode:t,parse:void 0!==n&&n?c:u};return{transform:function(r,e){s.call(i,i.buffer+r,!1,e)},flush:function(r){s.call(i,i.buffer,!0,r)}}}r.LtsvToJsonStream=l,r.createLtsvToJsonStream=function(r){return new TransformStream(l(r))},r.format=function(r){return i(r,!1)},r.formatStrict=function(r){return i(r,!0)},r.isValidLabel=e,r.isValidValue=t,r.parse=function(r){return f(r,!1)},r.parseLine=u,r.parseLineStrict=c,r.parseStrict=function(r){return f(r,!0)},r.stringify=function(r,e){void 0===e&&(e={strict:!1});var t=e.strict;return i(r,void 0!==t&&t)},Object.defineProperty(r,"__esModule",{value:!0})}));
//# sourceMappingURL=ltsv.min.js.map
